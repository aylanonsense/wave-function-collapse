<html>
	<head>
		<title>wave-function-collapse</title>
		<script type="text/javascript">
			var BASE_URL = window.location.pathname;
			if (BASE_URL.endsWith('/')) {
				BASE_URL = BASE_URL.substring(0, BASE_URL.length - 1);
			}
			(function() {
				// add script
				var scripts = document.createElement('script');
				scripts.setAttribute('src', BASE_URL + '/bundle.js');
				document.head.appendChild(scripts);
			})();
		</script>
		<style>
			body {
				image-rendering: pixelated;
				display: flex;
				flex-wrap: wrap;
				flex-direction: row;
				justify-content: center;
			}
			h2 {
				margin: 0 0 5px;
			}
			.controls {
				margin-bottom: 10px;
			}
			#input-canvas {
				margin-top: 4px;
				border: 1px solid black;
			}
			#output-section {
				padding-left: 15px;
			}
			#output-canvas {
				border: 1px solid black;
			}
			#samples {
				display: flex;
				flex-wrap: wrap;
			}
			.pixel-sample {
				display: flex;
				flex-direction: column;
				padding: 3px 7px;
			}
			.pixel-sample input {
				width: 24px;
				align-self: center;
				text-align: center;
			}
			.pixel-sample canvas {
				align-self: center;
			}
			#entropy-remaining {
				display: inline-block;
				width: 60px;
			}
			#entropy-bar {
				display: inline-block;
				width: 191px;
				height: 10px;
				margin-top: 10px;
				border: 1px solid #000;
			}
			#entropy-bar-color {
				width: 0%;
				height: 100%;
				background-color: #6ad2f9;
			}
		</style>
	</head>
	<body>
		<div class="input-section">
			<h2>Input:</h2>
			<div class="controls">
				<select id="select-input-image">
					<option value="/img/squares.png">Squares</option>
					<option value="/img/pipes.png">Pipes</option>
					<option value="/img/lines.png">Lines</option>
					<option value="/img/bubbles.png">Bubbles</option>
					<option value="/img/maze.png">Maze</option>
					<option value="/img/zigs.png">Zigs</option>
				</select>
			</div>
			<div><canvas id="input-canvas" width="144px" height="136px"></canvas></div>
		</div>
		<div id="samples-section" style="display:none;">
			<h2>Samples:</h2>
			<div class="controls">
				<!--
				<label>Width: <input id="sample-width" type="text" value="3"></label>
				<label>Height: <input id="sample-height" type="text" value="3"></label>
				-->
				<label><input id="flip-horizontal" type="checkbox" checked="checked"> Flip horizontal</label>
				<label><input id="flip-vertical" type="checkbox" checked="checked"> Flip vertical</label>
				<label><input id="rotate-90" type="checkbox" checked="checked"> Rotate 90</label>
				<label><input id="rotate-180" type="checkbox" checked="checked"> Rotate 180</label>
				<!--
				<label><input id="replace-samples" type="checkbox" checked="checked"> Replace Samples</label>
				-->
				<button id="generate-samples">Generate Samples</button>
			</div>
			<div id="samples"></div>
		</div>
		<div id="output-section">
			<h2>Output:</h2>
			<div class="controls">
				<label>Width: <input id="sample-width" type="text" value="40" style="width:25px"></label>
				<label>Height: <input id="sample-height" type="text" value="20" style="width:25px"></label>
				<button id="reset-output">Reset</button>
				<button id="step-output" style="display:none;">Step</button>
				<button id="generate-output">Start Generating</button>
				<button id="save-as-gif" style="display:none;">Save as GIF</button>
			</div>
			<div><canvas id="output-canvas"></canvas></div>
			<div class="controls">
				<div>Entropy remaining: <span id="entropy-remaining" style="display:none;">---</span> <div id="entropy-bar"><div id="entropy-bar-color"></div></div></div>
			</div>
		</div>
	</body>
</html>